{"version":3,"sources":["redux/phonebook/phonebook-operation.js","redux/phonebook/phonebook-reducer.js","redux/auth/auth-slice.js","redux/store.js","components/Navigation/Navigation.js","components/AuthNav/AuthNav.js","components/UserMenu/UserMenu.js","components/AppBar/AppBar.js","views/PrivateRoute.js","views/PublicRoute.js","App.jsx","index.js","redux/auth/auth-selectors.js","redux/auth/auth-operation.js","components/UserMenu/UserMenu.module.css","components/Loading/Loading.js","redux/phonebook/phonebook-actions.js","components/Container/Container.js","components/AppBar/AppBar.module.css","components/Container/Container.module.css","components/Loading/Loading.module.css"],"names":["axios","defaults","baseURL","fetchContacts","createAsyncThunk","_","a","rejectWithValue","get","data","addContact","name","number","post","deleteContact","id","delete","contacts","createReducer","fulfilled","payload","state","filter","loading","pending","rejected","error","changeFilter","combineReducers","authSlice","createSlice","initialState","user","email","token","isLoggedIn","isFetchingCurrentUser","extraReducers","authOperations","register","action","logIn","logOut","fetchCurrentUser","middleware","getDefaultMiddleware","serializableCheck","ignoredActions","FLUSH","REHYDRATE","PAUSE","PERSIST","PURGE","REGISTER","logger","authPersistConfig","key","storage","whitelist","store","configureStore","reducer","auth","persistReducer","authReducer","phonebook","phonebookReducer","devTools","process","persistor","persistStore","Navigation","useSelector","getIsLoggedIn","to","className","isActive","AuthNav","UserMenu","dispatch","useDispatch","userName","getUserName","s","container","text","Avatar","sx","bgcolor","blue","src","avatar","Button","variant","startIcon","type","onClick","AppBar","bottomShadow","PrivateRoute","children","PublicRoute","HomePage","lazy","RegisterPage","LoginPage","ContactsPage","App","getFetchingCurrentUser","useEffect","Container","Loading","fallback","path","element","ReactDOM","render","StrictMode","document","getElementById","headers","common","Authorization","credentials","response","status","alert","thunkAPI","getState","persistedToken","operations","module","exports","color","height","width","createAction"],"mappings":"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","file":"static/js/main.b38c7328.chunk.js","sourcesContent":["import { createAsyncThunk } from '@reduxjs/toolkit';\nimport axios from 'axios';\n\naxios.defaults.baseURL = 'https://connections-api.herokuapp.com';\n\n/*\n * GET, /contacts\n */\nexport const fetchContacts = createAsyncThunk(\n  'contacts/fetchContacts',\n  async (_, { rejectWithValue }) => {\n    try {\n      const { data } = await axios.get('/contacts');\n      return data;\n    } catch (error) {\n      return rejectWithValue(error);\n    }\n  },\n);\n\n/*\n * POST, /contacts\n */\nexport const addContact = createAsyncThunk(\n  'contacts/addContact',\n  async ({ name, number }, { rejectWithValue }) => {\n    try {\n      const { data } = await axios.post('/contacts', { name, number });\n      return data;\n    } catch (error) {\n      return rejectWithValue(error);\n    }\n  },\n);\n\n/*\n * DELETE, /contacts\n */\nexport const deleteContact = createAsyncThunk(\n  'contacts/deleteContact',\n  async (id, { rejectWithValue }) => {\n    try {\n      await axios.delete(`/contacts/${id}`);\n      return id;\n    } catch (error) {\n      return rejectWithValue(error);\n    }\n  },\n);\n","import { combineReducers } from 'redux';\nimport { createReducer } from '@reduxjs/toolkit';\nimport {\n  fetchContacts,\n  addContact,\n  deleteContact,\n} from './phonebook-operation';\nimport { changeFilter } from './phonebook-actions';\n\nconst contacts = createReducer([], {\n  [fetchContacts.fulfilled]: (_, { payload }) => payload,\n  [addContact.fulfilled]: (state, { payload }) => [...state, payload],\n  [deleteContact.fulfilled]: (state, { payload }) =>\n    state.filter(({ id }) => id !== payload),\n});\n\nconst loading = createReducer(false, {\n  [fetchContacts.pending]: () => true,\n  [fetchContacts.fulfilled]: () => false,\n  [fetchContacts.rejected]: () => false,\n  [addContact.pending]: () => true,\n  [addContact.fulfilled]: () => false,\n  [addContact.rejected]: () => false,\n  [deleteContact.pending]: () => true,\n  [deleteContact.fulfilled]: () => false,\n  [deleteContact.rejected]: () => false,\n});\n\nconst error = createReducer(null, {\n  [fetchContacts.pending]: () => null,\n  [fetchContacts.rejected]: (_, { error }) => error,\n  [addContact.pending]: () => null,\n  [addContact.rejected]: (_, { error }) => error,\n  [deleteContact.pending]: () => null,\n  [deleteContact.rejected]: (_, { error }) => error,\n});\n\n//state не нужен, ставим вместо него _\nconst filter = createReducer('', {\n  [changeFilter]: (_, { payload }) => payload,\n});\n\nexport default combineReducers({\n  contacts,\n  filter,\n  loading,\n  error,\n});\n","import { createSlice } from '@reduxjs/toolkit';\nimport authOperations from './auth-operation';\n\nconst initialState = {\n  user: { name: null, email: null },\n  token: null,\n  isLoggedIn: false,\n  isFetchingCurrentUser: false,\n};\n\nconst authSlice = createSlice({\n  name: 'auth',\n  initialState,\n  extraReducers: {\n    [authOperations.register.fulfilled](state, action) {\n      state.user = action.payload.user;\n      state.token = action.payload.token;\n      state.isLoggedIn = true;\n    },\n    [authOperations.logIn.fulfilled](state, action) {\n      state.user = action.payload.user;\n      state.token = action.payload.token;\n      state.isLoggedIn = true;\n    },\n    [authOperations.logOut.fulfilled](state, action) {\n      state.user = { name: null, email: null };\n      state.token = null;\n      state.isLoggedIn = false;\n    },\n    [authOperations.fetchCurrentUser.pending](state) {\n      state.isFetchingCurrentUser = true;\n    },\n    [authOperations.fetchCurrentUser.fulfilled](state, action) {\n      state.user = action.payload;\n      state.isLoggedIn = true;\n      state.isFetchingCurrentUser = false;\n    },\n    [authOperations.fetchCurrentUser.rejected](state) {\n      state.isFetchingCurrentUser = false;\n    },\n  },\n});\n\nexport default authSlice.reducer;\n","import { configureStore, getDefaultMiddleware } from '@reduxjs/toolkit';\nimport logger from 'redux-logger';\nimport {\n  persistStore,\n  persistReducer,\n  FLUSH,\n  REHYDRATE,\n  PAUSE,\n  PERSIST,\n  PURGE,\n  REGISTER,\n} from 'redux-persist';\nimport storage from 'redux-persist/lib/storage';\nimport phonebookReducer from './phonebook/phonebook-reducer';\nimport authReducer from './auth/auth-slice';\n\nconst middleware = [\n  ...getDefaultMiddleware({\n    serializableCheck: {\n      ignoredActions: [FLUSH, REHYDRATE, PAUSE, PERSIST, PURGE, REGISTER],\n    },\n  }),\n  logger,\n];\n\n/* const phonebookPersistConfig = {\n  key: 'phonebook',\n  storage,\n  blacklist: ['filter'],\n}; */\n\nconst authPersistConfig = {\n  key: 'auth',\n  storage,\n  whitelist: ['token'],\n};\n\nexport const store = configureStore({\n  reducer: {\n    auth: persistReducer(authPersistConfig, authReducer),\n    phonebook: phonebookReducer,\n  },\n  middleware,\n  devTools: process.env.NODE_ENV === 'development',\n});\n\nexport const persistor = persistStore(store);\n","import React from 'react';\nimport { NavLink } from 'react-router-dom';\nimport { useSelector } from 'react-redux';\n\nimport { getIsLoggedIn } from '../../redux/auth/auth-selectors';\nimport './Navigation.css';\n\nconst Navigation = () => {\n  const isLoggedIn = useSelector(getIsLoggedIn);\n\n  return (\n    <nav>\n      <NavLink\n        to=\"/\"\n        className={({ isActive }) => 'link ' + (isActive ? 'active' : '')}\n      >\n        Home\n      </NavLink>\n      {isLoggedIn && (\n        <NavLink\n          to=\"/contacts\"\n          className={({ isActive }) => 'link ' + (isActive ? 'active' : '')}\n        >\n          Contacts\n        </NavLink>\n      )}\n    </nav>\n  );\n};\nexport default Navigation;\n","import React from 'react';\nimport { NavLink } from 'react-router-dom';\n\nexport default function AuthNav() {\n  return (\n    <div>\n      <NavLink\n        to=\"/register\"\n        className={({ isActive }) => 'link ' + (isActive ? 'active' : '')}\n      >\n        Register\n      </NavLink>\n      <NavLink\n        to=\"/login\"\n        className={({ isActive }) => 'link ' + (isActive ? 'active' : '')}\n      >\n        Log in\n      </NavLink>\n    </div>\n  );\n}\n","import { useSelector, useDispatch } from 'react-redux';\n\nimport Avatar from '@mui/material/Avatar';\nimport ExitToAppIcon from '@mui/icons-material/ExitToApp';\nimport Button from '@mui/material/Button';\nimport { blue } from '@mui/material/colors';\n\nimport { getUserName } from '../../redux/auth/auth-selectors';\nimport authOperations from '../../redux/auth/auth-operation';\nimport s from './UserMenu.module.css';\n\nexport default function UserMenu() {\n  const dispatch = useDispatch();\n  const userName = useSelector(getUserName);\n\n  return (\n    <div className={s.container}>\n      <p className={s.text}>Добро пожаловать, {userName}! </p>\n      <Avatar\n        sx={{ bgcolor: blue[700] }}\n        src=\"/broken-image.jpg\"\n        className={s.avatar}\n      />\n      <Button\n        variant=\"contained\"\n        startIcon={<ExitToAppIcon />}\n        type=\"button\"\n        onClick={() => dispatch(authOperations.logOut())}\n      >\n        Exit\n      </Button>\n    </div>\n  );\n}\n","import React from 'react';\nimport { useSelector } from 'react-redux';\n\nimport { getIsLoggedIn } from '../../redux/auth/auth-selectors';\nimport Navigation from '../Navigation';\nimport AuthNav from '../AuthNav';\nimport UserMenu from '../UserMenu';\n\nimport s from './AppBar.module.css';\n\nfunction AppBar() {\n  const isLoggedIn = useSelector(getIsLoggedIn);\n  return (\n    <header className={s.bottomShadow}>\n      <Navigation />\n      {isLoggedIn ? <UserMenu /> : <AuthNav />}\n    </header>\n  );\n}\n\nexport default AppBar;\n","import { Navigate } from 'react-router-dom';\nimport { useSelector } from 'react-redux';\nimport { getIsLoggedIn } from '../redux/auth/auth-selectors';\n\nexport default function PrivateRoute({ children }) {\n  const isLoggedIn = useSelector(getIsLoggedIn);\n  return isLoggedIn ? children : <Navigate to=\"/login\" />;\n}\n","import { Navigate } from 'react-router-dom';\nimport { useSelector } from 'react-redux';\nimport { getIsLoggedIn } from '../redux/auth/auth-selectors';\n\nexport default function PublicRoute({ children }) {\n  const isLoggedIn = useSelector(getIsLoggedIn);\n  return isLoggedIn ? <Navigate to=\"/contacts\" /> : children;\n}\n","import React from 'react';\r\nimport { useEffect } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { lazy, Suspense } from 'react';\r\nimport { Routes, Route } from 'react-router-dom';\r\n\r\nimport authOperations from './redux/auth/auth-operation';\r\nimport { getFetchingCurrentUser } from './redux/auth/auth-selectors';\r\n\r\nimport AppBar from './components/AppBar';\r\nimport Container from './components/Container';\r\nimport Loading from './components/Loading';\r\nimport PrivateRoute from './views/PrivateRoute';\r\nimport PublicRoute from './views/PublicRoute';\r\n\r\nconst HomePage = lazy(() =>\r\n  import('./views/HomePage' /* webpackChunkName: \"HomePage\"*/),\r\n);\r\nconst RegisterPage = lazy(() =>\r\n  import('./views/RegisterPage' /* webpackChunkName: \"RegisterPage\"*/),\r\n);\r\nconst LoginPage = lazy(() =>\r\n  import('./views/LoginPage' /* webpackChunkName: \"LoginPage\"*/),\r\n);\r\nconst ContactsPage = lazy(() =>\r\n  import('./views/ContactsPage' /* webpackChunkName: \"ContactsPage\"*/),\r\n);\r\n\r\nexport default function App() {\r\n  const dispatch = useDispatch();\r\n  const isFetchingCurrentUser = useSelector(getFetchingCurrentUser);\r\n\r\n  useEffect(() => {\r\n    dispatch(authOperations.fetchCurrentUser());\r\n  }, [dispatch]);\r\n\r\n  return (\r\n    <Container>\r\n      {isFetchingCurrentUser ? (\r\n        <Loading />\r\n      ) : (\r\n        <>\r\n          <AppBar />\r\n          <Suspense fallback={<Loading />}>\r\n            <Routes>\r\n              <Route path=\"/\" element={<HomePage />}></Route>\r\n              <Route\r\n                path=\"/register\"\r\n                element={\r\n                  <PublicRoute>\r\n                    <RegisterPage />\r\n                  </PublicRoute>\r\n                }\r\n              ></Route>\r\n              <Route\r\n                path=\"/login\"\r\n                element={\r\n                  <PublicRoute>\r\n                    <LoginPage />\r\n                  </PublicRoute>\r\n                }\r\n              ></Route>\r\n              <Route\r\n                path=\"/contacts\"\r\n                element={\r\n                  <PrivateRoute>\r\n                    <ContactsPage />\r\n                  </PrivateRoute>\r\n                }\r\n              ></Route>\r\n              <Route path=\"*\" element={<HomePage />} />\r\n            </Routes>\r\n          </Suspense>\r\n        </>\r\n      )}\r\n    </Container>\r\n  );\r\n}\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter } from 'react-router-dom';\nimport { persistor, store } from './redux/store';\nimport { Provider } from 'react-redux';\nimport { PersistGate } from 'redux-persist/integration/react';\nimport App from './App';\nimport 'modern-normalize/modern-normalize.css';\nimport './index.css';\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <PersistGate loading={null} persistor={persistor}>\n        <BrowserRouter>\n          <App />\n        </BrowserRouter>\n      </PersistGate>\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n","export const getIsLoggedIn = state => state.auth.isLoggedIn;\nexport const getUserName = state => state.auth.user.name;\nexport const getFetchingCurrentUser = state => state.auth.isFetchingCurrentUser;\n","import axios from 'axios';\nimport { createAsyncThunk } from '@reduxjs/toolkit';\n\naxios.defaults.baseURL = `https://connections-api.herokuapp.com`;\n\nconst token = {\n  set(token) {\n    axios.defaults.headers.common.Authorization = `Bearer ${token}`;\n  },\n  unset() {\n    axios.defaults.headers.common.Authorization = '';\n  },\n};\n\n/*\n * POST, /users/signup\n * body: { name, email, password }\n */\nconst register = createAsyncThunk(\n  'auth/register',\n  async (credentials, { rejectWithValue }) => {\n    try {\n      const { data } = await axios.post('/users/signup', credentials);\n      token.set(data.token);\n      return data;\n    } catch (error) {\n      if (error.response.status === 400) {\n        alert('User creation error! Please try again!');\n      } else if (error.response.status === 500) {\n        alert('Server error! Please try again later!');\n      } else {\n        alert('Oops, something went wrong!');\n      }\n      return rejectWithValue(error);\n    }\n  },\n);\n\n\nconst logIn = createAsyncThunk(\n  'auth/login',\n  async (credentials, { rejectWithValue }) => {\n    try {\n      const { data } = await axios.post('/users/login', credentials);\n      token.set(data.token);\n      return data;\n    } catch (error) {\n      alert('Invalid email or password! Please enter correct data!');\n      return rejectWithValue(error);\n    }\n  },\n);\n\n/*\n * POST, /users/login\n * body: { email, password }\n */\nconst logOut = createAsyncThunk('auth/logout', async () => {\n  try {\n    await axios.post('/users/logout');\n    token.unset();\n  } catch (error) {\n    if (error.response.status === 500) {\n      alert('Server error! Please try again later!');\n    } else {\n      alert('Something went wrong! Please reload the page!');\n    }\n  }\n});\n\n\nconst fetchCurrentUser = createAsyncThunk(\n  'auth/refresh',\n  async (_, thunkAPI) => {\n    const state = thunkAPI.getState();\n    const persistedToken = state.auth.token;\n\n    if (persistedToken === null) {\n      return thunkAPI.rejectWithValue();\n    }\n\n    token.set(persistedToken);\n    try {\n      const { data } = await axios.get('/users/current');\n      return data;\n    } catch (error) {\n      token.unset();\n      alert('Your session has timed out. Please login again!');\n    }\n  },\n);\n\nconst operations = {\n  register,\n  logIn,\n  logOut,\n  fetchCurrentUser,\n};\n\nexport default operations;\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"UserMenu_container__2lNUp\",\"text\":\"UserMenu_text__Lr9SB\",\"avatar\":\"UserMenu_avatar__2nyl9\"};","import Loader from 'react-loader-spinner';\nimport s from './Loading.module.css';\n\nconst Loading = () => (\n  <div className={s.loading}>\n    <Loader type=\"Oval\" color=\"#1976d2\" height={100} width={100} />\n  </div>\n);\n\nexport default Loading;\n","import { createAction } from '@reduxjs/toolkit';\n\nexport const changeFilter = createAction('phonebook/ChangeFilter');\n","import s from './Container.module.css';\n\nexport default function Container({ children }) {\n  return <div className={s.container}>{children}</div>;\n}\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"bottomShadow\":\"AppBar_bottomShadow__2YpGL\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"Container_container__3nUrY\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"loading\":\"Loading_loading__lSiVp\"};"],"sourceRoot":""}